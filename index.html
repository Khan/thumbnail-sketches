<!DOCTYPE html>
<html>
<head>
  <script src="https://fb.me/react-with-addons-0.13.3.js"></script>
  <script src="https://fb.me/JSXTransformer-0.13.3.js"></script>
  <title>hoveroo</title>
  <style type="text/css">
  html, body {width: 100%; height: 100%;}


  /* basic thumbnail frame styles */
  .thumb {
    position: absolute;
    background-color: rgba(1,1,1,.5);
    background-image: url(img/addition_1.png);
    background-size: cover;
    display: table;
  }
  .thumb:focus,
  .thumb:hover {
    background-image: url(img/addition_1.gif);
  }
  .thumb .title {
    margin-top: -10px;
    font-family: ProximaNova-Regular;
    color: white;
    display: table-cell;
    text-transform: uppercase;
    text-align: center;
    font-size: 28px;
    vertical-align: middle;
    height: 100%;
    position: relative;
    top: -10px;
  }
  .banner {
    background-color: #558842;
    height: 30px;
    position: absolute;
    bottom: 0px;
    left: 0px;
    width: 100%;
  }
  .timecode {
    display: inline-block;
    padding: 2px 2px 1px 3px;
    background-color: rgba(1,1,1,.8);
    color: white;
    font-family: helvetica;
    position: absolute;
    right: 1px;
    bottom: 1px;
    font-size: 11px;
  }

  /* alternative thumbnail styles */
  .alt .banner {
    height: 60px;

  }
  .alt .title {
    font-size: 16px;
    text-align: left;
    display: block;
    position: absolute;
    bottom: 15px;
    top: auto;
    left: 10px;
    text-transform: none;
    z-index: 10;
    height: 35px;
    margin-top: 0;

  }
  </style>
</head>
<body>
  <div id="reactbox" class="alt"></div>
  <script type="text/jsx">

    // stolen from underscore.js
    var shuffle = function(set) {
      var length = set.length;
      var shuffled = Array(length);
      for (var index = 0, rand; index < length; index++) {
        rand = Math.floor(Math.random() * (index + 1));
        if (rand !== index) shuffled[index] = shuffled[rand];
        shuffled[rand] = set[index];
      }
      return shuffled;
    };

    var ThumbBox = React.createClass({
      render: function(){
        var params = this.props.params;
        var thumbStyle = {
          width: params.width,
          height: params.height,
          left: params.left,
          top: params.top
        };
        var title = params.title;

        return (
          <div className="thumb" style={thumbStyle}>
            <div className="title">{this.props.metadata.title}</div>
            <div className="banner">
              <div className="timecode">15:42</div>
            </div>
          </div>
        );
      }
    });

    var ProtoFrame = React.createClass({
      render: function(){
        var proto = this.props.details;
        var protoStyle = {
          backgroundSize: "cover",
          backgroundImage: "url("+ proto.canvas +")",
          height: proto.height,
          width: proto.width
        };

        var metadata = shuffle(proto.metadata)
        var thumbs = proto.dimensions.map(function(e, i, a) {
          return (<ThumbBox params={e} metadata={metadata[i]} key={proto.canvas + i} />)
        })

        return (
          <div style={protoStyle} className="protoContainer">
            {thumbs}
          </div>
        );
      }
    });

    // TODO this represents _just one_ kind of thumb in this frame
    protoProps = {
      canvas: "img/chrome/G2lH.png",
      width: 1388,
      height: 889,
      dimensions: [
        {
          width: 256, height: 144,
          top: 206, left: 544
        },
        {
          width: 256, height: 144,
          top: 395, left: 544
        },
        {
          width: 256, height: 144,
          top: 584, left: 544
        }
      ],
      metadata: [
        { title: "What is an algorithm?" },
        { title: "A guessing game" },
        { title: "Route-finding" },
      ]
    }
    var box = document.getElementById("reactbox");
    React.render(<ProtoFrame details={protoProps} />, box);
  </script>
</body>
</html>
